# ModBot

## Бот-модератор для Telegram-канала вакансий.

### Краткое описание<br>
Проверяет каждое сообщение в чате на наличие тега #вакансия и его вариаций, 
при наличии тега проверяет сообщение на соответствие конфигурируемому списку правил. 
В случае несоответствия отвечает отправителю сообщения чеклистом формата:<p>

```
Формат работы            — OK
Вознаграждение           — OK
Занятость                — OK
Название                 — OK
Варианты трудоустройства — X
```

### Принцип работы и использование
Обработчик сообщений передает текст сообщения в контроллер правил, который подготавливает переменные `result = True` и `checklist = []`, и передает их вместе  со строкой-текстом в первое правило итерируемого списка, которое анализирует текст, при несоответствии меняет `result = False` и дополняет checklist кортежем `(self.name, ‘OK’)`, при соответствии: `result = False`, `(self.name, ‘X’)`, и возвращает result и checklist контроллеру правил.<p>
![image.png](..%2F..%2F..%2F..%2F..%2FDownloads%2Fimage.png)
Контроллер передает text, result, checklist в следующее правило, и так до конца списка.
Модуль с правилами можно выгружать через команду админа /get, редактировать и обновлять в работающем боте через команду /set. Для правильной работы контроллера правил требуется, чтобы новое правило принимало в качестве аргументов `text`, `result`, `checklist` и имело метод `apply`, возвращающий `result` и `checklist`.

### Запуск
Если переменные в докерфайле:<br>
```shell
docker run borisrouge/modbot
```
Если нет:
```shell
docker run -e TELEGRAM_BOT_TOKEN=токен_бота -e ADMIN_ID=ид_администратора --init borisrouge/modbot
```

Запуск скрипта без контейнера:
```shell
python start.py
```

### Планы:
• Проверка, не забыл ли постер поставить тег вакансии на свое сообщение